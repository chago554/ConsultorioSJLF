<script>
    //cargar datos del paciente elegido y ponerlos en los inputs
    function cargarEnfermeros(idEnfermero) {
        var datos = {
            id: idEnfermero
        }

        $.ajax({
            url: backend + "/enfermerosSJLF/consultarSJLF",
            type: 'post',
            datatype: 'json',
            data: JSON.stringify(datos),
            contentType: 'application/json',
            xhrFields: { withCredentials: true },

            success: function (respuesta) {
                console.log(respuesta);
                $("#nombre").val(respuesta.nombreSJLF);
                $("#curp").val(respuesta.curpSJLF),
                    $("#idEnfermero").val(respuesta.id)
            }
        });
    }

    //guardar paciente

    function guardarEnfermero() {

        var datos = {
            nombreSJLF: $("#nombre").val(),
            curpSJLF: $("#curp").val(),
            id: $("#idEnfermero").val()
        };

        $.ajax({
            url: backend + "/enfermerosSJLF/modificarSJLF",
            type: 'post', //es un metod post
            datatype: 'json', //se espera respuesta del server en JOSN
            data: JSON.stringify(datos),// Convierte los datos que se van a enviar al servidor en una cadena JSON
            contentType: 'application/json',//Los datos que se envían es JSON.
            xhrFields: { withCredentials: true },

            success: function (respuesta) {
                console.log(respuesta);

                if (respuesta == '¡Enfermero actualizado exitosamente!') {

                    $("#divPrincipal").load("enfermeros/enfermeros.html", function () {
                        var alerta = '<div class="alert alert-dismissible alert-primary ">' +
                            '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>' +
                            ' <strong class="h5">' + respuesta + '</strong>';

                        $("#divAlertas").html(alerta);
                        setTimeout(() => {
                            $("#divAlertas").html(null);
                        }, 2000);
                    });


                } else {
                    var alerta = '<div class="alert alert-dismissible alert-primary ">' +
                        '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>' +
                        ' <strong class="h5">' + respuesta + '</strong>';

                    $("#divAlertas").html(alerta);
                    setTimeout(() => {
                        $("#divAlertas").html(null);
                    }, 3000);
                }
            }
        })
    }
</script>



<div class="col">
    <div class="row p-5">
        <input type="hidden" id="idEnfermero">
      <form action="" class="was-validated">
        <div>
          <legend class="h1">Guardar un nuevo enfermero</legend>
          <fieldset>
            <label class="form-label text-dark fw-bold" for="nombre">Nombre(s)</label>
            <input class="form-control" required id="nombre" type="text" placeholder="Proporcione su nombre">
          </fieldset>
        </div>
        <div>
          <fieldset>
            <label class="form-label mt-4 text-dark fw-bold" for="curp">CURP</label>
            <input class="form-control" required id="curp" type="text" minlength="18" maxlength="18"
              placeholder="Ingrese su CURP">
          </fieldset>
        </div>
      
        <div class="form-control">
          <button class="btn btn-dark " onclick='$("#divPrincipal").load("enfermeros/enfermeros.html")'><i class="bi bi-arrow-bar-left"></i>Regresar</button>
          <button class="btn btn-info" onclick='guardarEnfermero()'><i class="bi bi-floppy"></i> Guardar</button>
        </div>
      </form>
    </div>
  </div>