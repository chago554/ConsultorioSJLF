<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<script>
    //cargar datos del  medico elegido y ponerlos en los inputs
    function cargarMedicos(idMedico) {
        var datos = {
            id: idMedico
        }
        $.ajax({
            url: backend + "/medicosSJLF/consultarSJLF",
            type: 'post',
            datatype: 'json',
            data: JSON.stringify(datos),
            contentType: 'application/json',
            xhrFields: { withCredentials: true },

            success: function (respuesta) {
                console.log(respuesta);
                $("#nombre").val(respuesta.nombreSJLF),
                $("#cedulaProfesional").val(respuesta.cedulaSJLF),
                $("#apellidos").val(respuesta.apellidosSJLF)
                $("#idMedico").val(respuesta.id)
                }
        });
    }


    //guardar 
    function guadarMedico() {
        var datos = {
            id: $("#idMedico").val(),
            nombreSJLF: $("#nombre").val(),
            cedulaSJLF: $("#cedulaProfesional").val(),
            apellidosSJLF: $("#apellidos").val()
        };

        $.ajax({
            url: backend + "/medicosSJLF/modificarSJLF",
            type: 'post', //es un metod post
            datatype: 'json', //se espera respuesta del server en JOSN
            data: JSON.stringify(datos),// Convierte los datos que se van a enviar al servidor en una cadena JSON
            contentType: 'application/json',//Los datos que se envían es JSON.
            xhrFields: { withCredentials: true },

            success: function (respuesta) {
                console.log(respuesta);

                if (respuesta == '¡Médico actualizado exitosamente!') {

                    $("#divPrincipal").load("medicos/medicos.html", function () {
                        var alerta = '<div class="alert alert-dismissible alert-primary ">' +
                            '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>' +
                            ' <strong class="h5">' + respuesta + '</strong>';

                        $("#divAlertas").html(alerta);
                        setTimeout(() => {
                            $("#divAlertas").html(null);
                        }, 2000);
                    });


                } else {
                    var alerta = '<div class="alert alert-dismissible alert-primary ">' +
                        '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>' +
                        ' <strong class="h5">' + respuesta + '</strong>';

                    $("#divAlertas").html(alerta);
                    setTimeout(() => {
                        $("#divAlertas").html(null);
                    }, 3000);
                }
            }
        })
    }
</script>



<div class="col">
    <div class="row p-5">
        <form action="" class="was-validated">
            <input type="hidden" id="idMedico">
            <div>
                <legend class="h1">Guardar un nuevo médico</legend>
                <div>
                    <fieldset>
                        <label class="form-label text-dark fw-bold" for="cedulaProfesional">Cédula profesional*</label>
                        <input class="form-control" required id="cedulaProfesional" type="text"
                            placeholder="Ingrese su cédula profesional" minlength="8" maxlength="12">
                    </fieldset>
                </div>


                <fieldset>
                    <label class="form-label text-dark fw-bold mt-4" for="nombre">Nombre(s)*</label>
                    <input class="form-control" required id="nombre" type="text" placeholder="Proporcione su nombre">
                </fieldset>
            </div>
            <div>
                <fieldset>
                    <label class="form-label mt-4 text-dark fw-bold" for="apellidos">Apellidos*</label>
                    <input class="form-control" required id="apellidos" type="text" placeholder="Ingrese sus apellidos">
                </fieldset>
            </div>

            <div class="form-control mt-5">
                <button class="btn btn-dark " onclick='$("#divPrincipal").load("medicos/medicos.html")'><i
                        class="bi bi-arrow-bar-left"></i>Regresar</button>
                <button class="btn btn-info" onclick='guadarMedico()'><i class="bi bi-floppy"></i> Guardar</button>
            </div>
        </form>
    </div>
</div>