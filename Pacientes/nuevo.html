<script>
  function guardarPaciente() {
    var datos = {
      nombreSJLF: $("#nombre").val(),
      curpSJLF: $("#curp").val(),
      tipoSangre: $("#comboTipoSangre").val()
    };

    $.ajax({
      url: backend + "/pacientesSJLF/guardarSJLF",
      type: 'post', //es un metod post
      datatype: 'json', //se espera respuesta del server en JOSN
      data: JSON.stringify(datos),// Convierte los datos que se van a enviar al servidor en una cadena JSON
      contentType: 'application/json',//Los datos que se envían es JSON.
      xhrFields: { withCredentials: true },

      success: function (respuesta) {
        console.log(respuesta);

        if (respuesta == '¡Paciente guardado con exito!') {

          $("#divPrincipal").load("Pacientes/pacientes.html", function () {
            var alerta = '<div class="alert alert-dismissible alert-primary ">' +
              '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>' +
              ' <strong class="h5">' + respuesta + '</strong>';

            $("#divAlertas").html(alerta);
            setTimeout(() => {
              $("#divAlertas").html(null);
            }, 2000);
          });


        } else {
          var alerta = '<div class="alert alert-dismissible alert-primary ">' +
            '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>' +
            ' <strong class="h5">' + respuesta + '</strong>';

          $("#divAlertas").html(alerta);
          setTimeout(() => {
            $("#divAlertas").html(null);
          }, 3000);
        }
      }
    })
  }
</script>

<div class="col">
  <div class="row p-5">
    <form action="" class="was-validated">
      <div>
        <legend class="h1">Guardar un nuevo paciente</legend>
        <fieldset>
          <label class="form-label text-dark fw-bold" for="nombre">Nombre(s)</label>
          <input class="form-control" required id="nombre" type="text" placeholder="Proporcione su nombre">
        </fieldset>
      </div>
      <div>
        <fieldset>
          <label class="form-label mt-4 text-dark fw-bold" for="curp">CURP</label>
          <input class="form-control" required id="curp" type="text" minlength="18" maxlength="18"
            placeholder="Ingrese su CURP">
        </fieldset>
      </div>
      <div>
        <fieldset>
          <label class="form-label mt-4 text-dark fw-bold" for="comboTipoSangre">Tipo de sangre</label>
          <select class="form-select" id="comboTipoSangre">
            <option value=0>O+</option>
            <option value=1>O-</option>
            <option value=2>A+</option>
            <option value=3>A-</option>
            <option value=4>B+</option>
            <option value=5>B-</option>
            <option value=6>AB+</option>
            <option value=7>AB-</option>
          </select>
        </fieldset>
      </div>
      <div class="form-control">
        <button class="btn btn-dark " onclick='$("#divPrincipal").load("Pacientes/pacientes.html")'>Regresar</button>
        <button class="btn btn-info" onclick='guardarPaciente()'>Guardar</button>
      </div>
    </form>
  </div>
</div>